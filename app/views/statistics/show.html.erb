<div class="app-container">
  <%= render 'shared/navbar' %>

  <main class="main-content">
    <div id="statisticsPage" class="page">
      <div class="page-header">
        <h1 class="page-title">LeetCode Statistics</h1>
        <p class="page-subtitle">Track your coding progress</p>
      </div>

      <% if @error_message %>
        <div class="alert alert-danger">
          <%= @error_message %>
        </div>
      <% end %>

      <div class="content-area">
        <% if @stats && @stats[:total].to_i > 0 %>

          <div class="stats-grid" id="overview-summary">
            <div class="stat-card">
              <h3 class="stat-title">Total Solved</h3>
              <p class="stat-value"><%= @stats[:total] %></p>
            </div>
            <div class="stat-card">
              <h3 class="stat-title">Last 7 Days</h3>
              <p class="stat-value"><%= @recent_stats[:week] %></p>
            </div>
            <div class="stat-card">
              <h3 class="stat-title">Last 30 Days</h3>
              <p class="stat-value"><%= @recent_stats[:month] %></p>
            </div>
          </div>

          <div class="highlights-container">
            <h2 class="highlights-title">Difficulty Breakdown</h2>
            
            <div class="progress-container">
              <span class="progress-label">Easy</span>
              <span class="progress-value"><%= @stats[:easy] %></span>
              <div class="progress-bar-wrapper">
                <div class="progress-bar easy" style="width: <%= ((@stats[:easy].to_f / @stats[:total]) * 100).round(1) %>%"></div>
              </div>
            </div>

            <div class="progress-container">
              <span class="progress-label">Medium</span>
              <span class="progress-value"><%= @stats[:medium] %></span>
              <div class="progress-bar-wrapper">
                <div class="progress-bar medium" style="width: <%= ((@stats[:medium].to_f / @stats[:total]) * 100).round(1) %>%"></div>
              </div>
            </div>
            
            <div class="progress-container">
              <span class="progress-label">Hard</span>
              <span class="progress-value"><%= @stats[:hard] %></span>
              <div class="progress-bar-wrapper">
                <div class="progress-bar hard" style="width: <%= ((@stats[:hard].to_f / @stats[:total]) * 100).round(1) %>%"></div>
              </div>
            </div>
          </div>

          <div class="stats-grid" id="activity-summary">
              <div class="stat-card">
                <h3 class="stat-title">Weekly Activity</h3>
                <p class="stat-value"><%= @recent_stats[:week] %> <span class="stat-unit">problems</span></p>
                <p class="stat-description">
                  <% if @recent_stats[:week] > 0 %>
                    Keep up the momentum!
                  <% else %>
                    No activity this week
                  <% end %>
                </p>
              </div>
              <div class="stat-card">
                <h3 class="stat-title">Monthly Progress</h3>
                <p class="stat-value"><%= @recent_stats[:month] %> <span class="stat-unit">problems</span></p>
                <p class="stat-description">
                  <% if @recent_stats[:month] > 0 %>
                    Great progress this month!
                  <% else %>
                    No activity this month
                  <% end %>
                </p>
              </div>
          </div>

        <% else %>
          <p>No LeetCode activity recorded. Solve a problem to see your stats!</p>
        <% end %>
      </div>
    </div>
  </main>
</div>